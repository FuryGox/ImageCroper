(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i(5155),r=i(2115),l=i(2669),o=i(8658);function d(e,t){let[i,n]=r.useState(()=>{{let t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){}}return t});return r.useEffect(()=>{localStorage.setItem(e,JSON.stringify(i))},[e,i]),[i,n]}function a(){let[e,t]=d("openDetailEditor",!1),[a,s]=d("enableCrop",!1),[h,c]=d("crop",{x:0,y:0}),[p,x]=d("zoom",1),[g,u]=d("fileinfo",null),[f,m]=d("image",null),[y,b]=d("cropSize",{width:0,height:0}),[w,j]=d("cropIntoMutiple",!1),[v,C]=d("specifileMutipleData",null),[k,I]=d("imageInfo",null),R=(0,r.useCallback)(e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];if(i){let e=new FileReader;e.onload=()=>{let t=new window.Image;t.onload=()=>{m(e.result),I({width:t.width,height:t.height}),u({name:i.name,size:i.size,type:i.type})},t.src=e.result},e.readAsDataURL(i)}},[]);return(0,n.jsxs)("div",{style:{width:"100%",height:"100vh",position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:0,padding:"0",backgroundColor:"#000",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center"},className:"".concat(e?"flex":"hidden","  "),children:(0,n.jsxs)("div",{style:{padding:"20px",color:"#fff",backgroundColor:"#333",zIndex:1e3,height:"80vh",width:"60%",overflowY:"auto",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"20px",position:"relative",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",scrollbarWidth:"none"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("h2",{children:"Detail Editor"}),(0,n.jsx)("button",{name:"close-button",style:{color:"red"},onClick:()=>t(!e),children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",style:{cursor:"pointer"},children:(0,n.jsx)("path",{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95 1.414-1.414z",fill:"currentColor"})})})]}),(0,n.jsxs)("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"10px",alignItems:"start",flexGrow:1},children:[(0,n.jsxs)("span",{style:{fontSize:"16px",color:"#ccc"},children:["Image Detail:",(0,n.jsx)("span",{style:{fontWeight:"bold"},children:k?"".concat(k.width," x ").concat(k.height):(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:R,style:{marginLeft:"10px",padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}})})]}),(0,n.jsxs)("div",{style:{marginTop:"10px"},children:[(0,n.jsxs)("label",{children:["Crop into multiple:",(0,n.jsx)("input",{type:"checkbox",checked:w,onChange:e=>j(e.target.checked),style:{marginLeft:"10px"}})]}),w&&(0,n.jsxs)("div",{style:{marginTop:"10px",display:"flex",alignItems:"start",gap:"10px",flexDirection:"column"},children:[(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Number of rows:",(0,n.jsx)("input",{id:"rows",type:"number",defaultValue:2,style:{width:"60px",marginLeft:"10px"}})]}),(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Number of columns:",(0,n.jsx)("input",{id:"columns",type:"number",defaultValue:2,style:{width:"60px",marginLeft:"10px"}})]}),(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Specifile for image at :",v&&null!=v?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{style:{marginLeft:"10px",width:"100%"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Image Position"}),(0,n.jsx)("th",{children:"Height"}),(0,n.jsx)("th",{children:"Width"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:v.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.imgPos}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"number",value:e.height,onChange:e=>{let i=[...v||[]];i[t].height=parseInt(e.target.value),C(i)},style:{width:"80px"}})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"number",value:e.width,onChange:e=>{let i=[...v||[]];i[t].width=parseInt(e.target.value),C(i)},style:{width:"80px"}})}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>{C(e=>e?e.filter((e,i)=>i!==t):[])},style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},t))})]})}):(0,n.jsx)("p",{style:{marginLeft:"10px",display:"inline"},children:"Default"}),(0,n.jsx)("button",{onClick:()=>{C(e=>[...e||[],{height:0,width:0,imgPos:(v||[]).length+1}])},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Specifile"}),(0,n.jsx)("button",{onClick:()=>{C(null)},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Specifile"})]}),(0,n.jsxs)("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"row",gap:"10px"},children:[(0,n.jsx)("button",{onClick:()=>{!function(){if(!f||!k)return;let e=document.getElementById("rows"),t=document.getElementById("columns"),r=e?parseInt(e.value,10):2,o=t?parseInt(t.value,10):2,{width:d,height:a}=k,s=Math.floor(d/o),h=Math.floor(a/r),c=[],p=document.createElement("canvas"),x=p.getContext("2d");if(!x)return;let g=new window.Image;g.onload=()=>{let e=1;for(let t=0;t<r;t++)for(let i=0;i<o;i++){let n=i*s,l=t*h,u=i===o-1?d-n:s,f=t===r-1?a-l:h;if(v&&v.length>0){let t=v.find(t=>t.imgPos===e);t&&(u=t.width>0?t.width:u,f=t.height>0?t.height:f)}p.width=u,p.height=f,x.clearRect(0,0,u,f),x.drawImage(g,n,l,u,f,0,0,u,f),c.push(p.toDataURL()),e++}i.e(201).then(i.bind(i,7201)).then(e=>{let{default:t}=e,i=document.getElementById("preview-cropped-images");i||((i=document.createElement("div")).id="preview-cropped-images",document.body.appendChild(i)),(0,l.createRoot)(i).render((0,n.jsx)(t,{images:c,table:{rows:r,cols:o}}))})},g.src=f}()},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Preview All Crop Image"}),(0,n.jsx)("button",{onClick:()=>{j(!1),C(null),b({width:0,height:0}),s(!1);let e=document.getElementById("preview-cropped-images");e&&(e.innerHTML="")},style:{padding:"5px 10px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reset"})]})]})]}),(0,n.jsx)("div",{id:"preview-cropped-images",style:{marginTop:"20px",maxHeight:"800px",overflowY:"auto",width:"100%"}})]}),(0,n.jsx)("div",{style:{marginTop:"20px",width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("button",{onClick:()=>{!function(){if(!w||!k||!f)return;let e=document.getElementById("rows"),t=document.getElementById("columns"),n=e?parseInt(e.value,10):2,r=t?parseInt(t.value,10):2,{width:l,height:o}=k,d=Math.floor(l/r),a=Math.floor(o/n),s=[],h=document.createElement("canvas"),c=h.getContext("2d");if(!c)return;let p=new window.Image;p.onload=()=>{let e=1;for(let t=0;t<n;t++)for(let i=0;i<r;i++){let x=i*d,g=t*a,u=i===r-1?l-x:d,f=t===n-1?o-g:a;if(v&&v.length>0){let t=v.find(t=>t.imgPos===e);t&&(u=t.width>0?t.width:u,f=t.height>0?t.height:f)}h.width=u,h.height=f,c.clearRect(0,0,u,f),c.drawImage(p,x,g,u,f,0,0,u,f),s.push(h.toDataURL()),e++}i.e(311).then(i.t.bind(i,9311,23)).then(e=>{let t=new e.default;s.forEach((e,i)=>{var n;let r=e.split(",");null==(n=r[0].match(/:(.*?);/))||n[1];let l=atob(r[1]),o=l.length,d=new Uint8Array(o);for(;o--;)d[o]=l.charCodeAt(o);t.file("cropped_".concat(i+1,".png"),d,{binary:!0})}),t.generateAsync({type:"blob"}).then(e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="".concat(null==g?void 0:g.name,"_").concat(Date.now(),".zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})})},p.src=f}(),t(!1)},style:{padding:"10px 20px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})})]})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"10vh"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:R}),k&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Image Width: ",k.width,"px"]}),(0,n.jsxs)("p",{children:["Image Height: ",k.height,"px"]})]}),(0,n.jsx)("button",{onClick:()=>{t(!0)},style:{padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Open Detail editor"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Crop Position: ","x: ".concat(h.x.toFixed(2),", y: ").concat(h.y.toFixed(2))]}),(0,n.jsxs)("span",{children:["Zoom: ",p.toFixed(2),(0,n.jsx)("input",{type:"range",min:"1",max:"20",step:"0.01",value:p,onChange:e=>x(parseFloat(e.target.value)),style:{width:"200px",marginLeft:"10px"}})]}),(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{style:{marginRight:"10px"},children:["Crop Size: ",y.width," x ",y.height," (px)",(0,n.jsx)("button",{onClick:()=>{s(!a),a?b({width:0,height:0}):b({width:200,height:200})},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:a?"Disable Crop":"Enable Crop"})]}),a&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{marginRight:"10px"},children:["Height:",(0,n.jsx)("input",{type:"range",min:"20",max:"1000",step:"1",value:y.height,onChange:e=>b({...y,height:parseInt(e.target.value)}),style:{width:"200px",marginRight:"10px"}})]}),(0,n.jsxs)("label",{children:["Width:",(0,n.jsx)("input",{type:"range",min:"20",max:"1000",step:"1",value:y.width,onChange:e=>b({...y,width:parseInt(e.target.value)}),style:{width:"200px",marginRight:"10px"}})]})]})]})]})]}),(0,n.jsx)("div",{style:{position:"relative",width:"100%",height:"90vh"},children:f&&(0,n.jsx)(o.Ay,{image:f,crop:a?h:{x:0,y:0},zoom:p,maxZoom:20,cropperProps:a?{style:{width:y.width?"".concat(y.width,"px"):"100%",height:y.height?"".concat(y.height,"px"):"100%"}}:{style:{display:"none"}},cropSize:a?y:void 0,onCropChange:c,onCropComplete:(e,t)=>{console.log(e,t)},onZoomChange:x})})]})}},6368:(e,t,i)=>{Promise.resolve().then(i.bind(i,3792))}},e=>{e.O(0,[658,441,964,358],()=>e(e.s=6368)),_N_E=e.O()}]);
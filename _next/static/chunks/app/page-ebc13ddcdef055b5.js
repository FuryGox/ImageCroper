(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3792:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i(5155),l=i(2115),r=i(2669),o=i(8658);function d(){let[e,t]=(0,l.useState)(!1),[d,s]=(0,l.useState)(!1),[a,h]=(0,l.useState)({x:0,y:0}),[p,c]=(0,l.useState)(1),[x,g]=(0,l.useState)(null),[u,f]=(0,l.useState)(null),[m,y]=(0,l.useState)({width:0,height:0}),[b,w]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null),[C,k]=(0,l.useState)(null),I=(0,l.useCallback)(e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];if(i){let e=new FileReader;e.onload=()=>{let t=new window.Image;t.onload=()=>{f(e.result),k({width:t.width,height:t.height}),g({name:i.name,size:i.size,type:i.type})},t.src=e.result},e.readAsDataURL(i)}},[]);return(0,n.jsxs)("div",{style:{width:"100%",height:"100vh",position:"relative"},children:[(0,n.jsx)("div",{style:{position:"absolute",top:0,padding:"0",backgroundColor:"#000",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center"},className:"".concat(e?"flex":"hidden","  "),children:(0,n.jsxs)("div",{style:{padding:"20px",color:"#fff",backgroundColor:"#333",zIndex:1e3,height:"80vh",width:"60%",overflowY:"auto",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"20px",position:"relative",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",scrollbarWidth:"none"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("h2",{children:"Detail Editor"}),(0,n.jsx)("button",{name:"close-button",style:{color:"red"},onClick:()=>t(!e),children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",style:{cursor:"pointer"},children:(0,n.jsx)("path",{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95 1.414-1.414z",fill:"currentColor"})})})]}),(0,n.jsxs)("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"10px",alignItems:"start",flexGrow:1},children:[(0,n.jsxs)("span",{style:{fontSize:"16px",color:"#ccc"},children:["Image Detail:",(0,n.jsx)("span",{style:{fontWeight:"bold"},children:C?"".concat(C.width," x ").concat(C.height):(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:I,style:{marginLeft:"10px",padding:"5px",borderRadius:"4px",border:"1px solid #ccc"}})})]}),(0,n.jsxs)("div",{style:{marginTop:"10px"},children:[(0,n.jsxs)("label",{children:["Crop into multiple:",(0,n.jsx)("input",{type:"checkbox",checked:b,onChange:e=>w(e.target.checked),style:{marginLeft:"10px"}})]}),b&&(0,n.jsxs)("div",{style:{marginTop:"10px",display:"flex",alignItems:"start",gap:"10px",flexDirection:"column"},children:[(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Number of rows:",(0,n.jsx)("input",{id:"rows",type:"number",defaultValue:2,style:{width:"60px",marginLeft:"10px"}})]}),(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Number of columns:",(0,n.jsx)("input",{id:"columns",type:"number",defaultValue:2,style:{width:"60px",marginLeft:"10px"}})]}),(0,n.jsxs)("label",{style:{marginLeft:"20px"},children:["Specifile for image at :",j&&null!=j?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("table",{style:{marginLeft:"10px",width:"100%"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Image Position"}),(0,n.jsx)("th",{children:"Height"}),(0,n.jsx)("th",{children:"Width"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:j.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.imgPos}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"number",value:e.height,onChange:e=>{let i=[...j||[]];i[t].height=parseInt(e.target.value),v(i)},style:{width:"80px"}})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"number",value:e.width,onChange:e=>{let i=[...j||[]];i[t].width=parseInt(e.target.value),v(i)},style:{width:"80px"}})}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>{v(e=>e?e.filter((e,i)=>i!==t):[])},style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Remove"})})]},t))})]})}):(0,n.jsx)("p",{style:{marginLeft:"10px",display:"inline"},children:"Default"}),(0,n.jsx)("button",{onClick:()=>{v(e=>[...e||[],{height:0,width:0,imgPos:(j||[]).length+1}])},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add Specifile"}),(0,n.jsx)("button",{onClick:()=>{v(null)},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Specifile"})]}),(0,n.jsxs)("div",{style:{marginLeft:"20px",display:"flex",flexDirection:"row",gap:"10px"},children:[(0,n.jsx)("button",{onClick:()=>{!function(){if(!u)return;let e=document.getElementById("rows"),t=document.getElementById("columns"),l=e?parseInt(e.value,10):2,o=t?parseInt(t.value,10):2,{width:d,height:s}=C||{width:0,height:0},a=Math.floor(d/o),h=Math.floor(s/l),p=[],c=document.createElement("canvas"),x=c.getContext("2d");if(!x)return;let g=new window.Image;g.onload=()=>{let e=1;for(let t=0;t<l;t++)for(let i=0;i<o;i++){let n=i*a,r=t*h,u=i===o-1?d-n:a,f=t===l-1?s-r:h;if(j&&j.length>0){let t=j.find(t=>t.imgPos===e);t&&(u=t.width>0?t.width:u,f=t.height>0?t.height:f)}c.width=u,c.height=f,x.clearRect(0,0,u,f),x.drawImage(g,n,r,u,f,0,0,u,f);let m=c.toDataURL();p.push(m),e++}i.e(201).then(i.bind(i,7201)).then(e=>{let{default:t}=e,i=document.getElementById("preview-cropped-images");i||((i=document.createElement("div")).id="preview-cropped-images",document.body.appendChild(i)),(0,r.createRoot)(i).render((0,n.jsx)(t,{images:p,table:{rows:l,cols:o}}))})},g.src=u}()},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Preview All Crop Image"}),(0,n.jsx)("button",{onClick:()=>{w(!1),v(null),y({width:0,height:0}),s(!1);let e=document.getElementById("preview-cropped-images");e&&(e.innerHTML="")},style:{padding:"5px 10px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reset"})]})]})]}),(0,n.jsx)("div",{id:"preview-cropped-images",style:{marginTop:"20px",maxHeight:"800px",overflowY:"auto",width:"100%"}})]}),(0,n.jsx)("div",{style:{marginTop:"20px",width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("button",{onClick:()=>{!function(){if(b){if(!C||!u)return;let e=document.getElementById("rows"),t=document.getElementById("columns"),n=e?parseInt(e.value,10):2,l=t?parseInt(t.value,10):2,{width:r,height:o}=C,d=Math.floor(r/l),s=Math.floor(o/n),a=[],h=document.createElement("canvas"),p=h.getContext("2d");if(!p)return;let c=new window.Image;c.onload=()=>{let e=1;for(let t=0;t<n;t++)for(let i=0;i<l;i++){let x=i*d,g=t*s,u=i===l-1?r-x:d,f=t===n-1?o-g:s;if(j&&j.length>0){let t=j.find(t=>t.imgPos===e);t&&(u=t.width>0?t.width:u,f=t.height>0?t.height:f)}h.width=u,h.height=f,p.clearRect(0,0,u,f),p.drawImage(c,x,g,u,f,0,0,u,f);let m=h.toDataURL();a.push(m),e++}i.e(311).then(i.t.bind(i,9311,23)).then(e=>{let t=new e.default;a.forEach((e,i)=>{var n;let l=e.split(",");null==(n=l[0].match(/:(.*?);/))||n[1];let r=atob(l[1]),o=r.length,d=new Uint8Array(o);for(;o--;)d[o]=r.charCodeAt(o);t.file("cropped_".concat(i+1,".png"),d,{binary:!0})}),t.generateAsync({type:"blob"}).then(e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="".concat(null==x?void 0:x.name,"_").concat(Date.now(),".zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})})},c.src=u}}(),t(!1)},style:{padding:"10px 20px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Save"})})]})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"10vh"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:I}),C&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Image Width: ",C.width,"px"]}),(0,n.jsxs)("p",{children:["Image Height: ",C.height,"px"]})]}),(0,n.jsx)("button",{onClick:()=>{t(!0)},style:{padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Open Detail editor"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["Crop Position: ","x: ".concat(a.x.toFixed(2),", y: ").concat(a.y.toFixed(2))]}),(0,n.jsxs)("span",{children:["Zoom: ",p.toFixed(2),(0,n.jsx)("input",{type:"range",min:"1",max:"20",step:"0.01",value:p,onChange:e=>c(parseFloat(e.target.value)),style:{width:"200px",marginLeft:"10px"}})]}),(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{style:{marginRight:"10px"},children:["Crop Size: ",m.width," x ",m.height," (px)",(0,n.jsx)("button",{onClick:()=>{s(!d),d?y({width:0,height:0}):y({width:200,height:200})},style:{marginLeft:"10px",padding:"5px 10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:d?"Disable Crop":"Enable Crop"})]}),d&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{style:{marginRight:"10px"},children:["Height:",(0,n.jsx)("input",{type:"range",min:"20",max:"1000",step:"1",value:m.height,onChange:e=>y({...m,height:parseInt(e.target.value)}),style:{width:"200px",marginRight:"10px"}})]}),(0,n.jsxs)("label",{children:["Width:",(0,n.jsx)("input",{type:"range",min:"20",max:"1000",step:"1",value:m.width,onChange:e=>y({...m,width:parseInt(e.target.value)}),style:{width:"200px",marginRight:"10px"}})]})]})]})]})]}),(0,n.jsx)("div",{style:{position:"relative",width:"100%",height:"90vh"},children:u&&(0,n.jsx)(o.Ay,{image:u,crop:d?a:{x:0,y:0},zoom:p,maxZoom:20,cropperProps:d?{style:{width:m.width?"".concat(m.width,"px"):"100%",height:m.height?"".concat(m.height,"px"):"100%"}}:{style:{display:"none"}},cropSize:d?m:void 0,onCropChange:h,onCropComplete:(e,t)=>{console.log(e,t)},onZoomChange:c})})]})}},6368:(e,t,i)=>{Promise.resolve().then(i.bind(i,3792))}},e=>{e.O(0,[658,441,964,358],()=>e(e.s=6368)),_N_E=e.O()}]);